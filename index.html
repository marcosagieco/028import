<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Sincronizada</title>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: 0 auto; }
        input, button { padding: 10px; margin: 5px 0; width: 100%; }
        ul { list-style-type: none; padding: 0; }
        li { background: #f9f9f9; margin: 5px 0; padding: 10px; border-bottom: 1px solid #ddd; }
    </style>
</head>
<body>

    <h2>Lista Compartida en Tiempo Real</h2>
    <input type="text" id="mensajeInput" placeholder="Escribe algo aquí...">
    <button onclick="guardarDato()">Enviar a todos los dispositivos</button>

    <h3>Mensajes:</h3>
    <ul id="listaMensajes">
        </ul>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <script>
        // 2. PEGA AQUÍ TU CONFIGURACIÓN DE FIREBASE (Lo que copiaste del paso 2)
        // Debe verse algo así (pero con tus propios números y letras):
       const firebaseConfig = {
  apiKey: "AIzaSyDoMATZ1yjZ3Q0ZsaFSgprs7VegxMdTifs",
  authDomain: "gestion-de-ventas-vapes.firebaseapp.com",
  databaseURL: "https://gestion-de-ventas-vapes-default-rtdb.firebaseio.com",
  projectId: "gestion-de-ventas-vapes",
  storageBucket: "gestion-de-ventas-vapes.firebasestorage.app",
  messagingSenderId: "547834087144",
  appId: "1:547834087144:web:249116f7c21dba9815ab5d",
  measurementId: "G-4YQM8PBLSM"
};
        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // FUNCIÓN PARA GUARDAR (ENVIAR A LA NUBE)
        function guardarDato() {
            const texto = document.getElementById('mensajeInput').value;
            if(texto.trim() === "") return; // No enviar vacíos

            // Guardar en la base de datos bajo la carpeta "mensajes"
            db.ref('mensajes').push({
                texto: texto,
                fecha: new Date().toISOString()
            });

            document.getElementById('mensajeInput').value = ''; // Limpiar caja
        }

        // FUNCIÓN PARA ESCUCHAR (RECIBIR DE LA NUBE)
        // Esto se activa solo cada vez que alguien agrega algo, en cualquier lugar del mundo
        db.ref('mensajes').on('child_added', function(snapshot) {
            const data = snapshot.val();
            const lista = document.getElementById('listaMensajes');
            
            const nuevoElemento = document.createElement('li');
            nuevoElemento.textContent = data.texto;
            lista.appendChild(nuevoElemento);
        });
    </script>

</body>
</html>
